{"ast":null,"code":"import axios from 'axios';\nimport MySidebar from '@/components/MySidebar.vue';\nimport MyButton from '@/components/Mybutton.vue';\nimport MyCard from \"@/components/Mycard.vue\";\nimport MyCartButton from '@/components/MyCartButton.vue';\nexport default {\n  name: \"MainFace\",\n  components: {\n    MySidebar,\n    MyButton,\n    MyCard,\n    MyCartButton\n  },\n\n  data() {\n    return {\n      username: '',\n      password: '',\n      goods: [],\n      pic: '',\n      content: '',\n      active: 999,\n      el_pic: ['el-1.jpg', 'el-2.jpg', 'el-3.jpg', 'el-4.jpg', 'el-5.jpg'],\n      mail: '',\n      money: '',\n      currentPage: 1,\n      pageSize: 30,\n      goodsGroup: [],\n      sessionid: '',\n      sum: 1334,\n      carts: [],\n      feedbackVisible: false,\n      feedbackContent: '',\n      formLabelWidth: \"\",\n      signin: false,\n      buy_change: false,\n      money_change: false\n    };\n  },\n\n  computed: {\n    welcome: function () {\n      return 'Hi, ' + this.username + '~ 开始您的烧瓶之旅';\n    }\n  },\n\n  created() {\n    document.addEventListener('keyup', this.keyup);\n    this.username = this.$route.query.userId;\n    this.password = this.$route.query.password;\n    this.money = this.$route.query.money;\n    this.mail = this.$route.query.mail;\n    this.sessionid = this.$route.query.sessionid;\n    this.$axios({\n      method: 'post',\n      url: '/api/goodcount/999/'\n    }).then(res => {\n      this.sum = res.data.count;\n    }).catch(err => {});\n    axios.get('/api/goods/999/1/31/', {}).then(res => {\n      this.goodsGroup = res.data;\n    });\n    axios.get('/api/getcart/' + this.username + '/').then(res => {\n      this.carts = res.data;\n    });\n    axios.get('/api/ischecked/' + this.username + '/').then(res => {\n      if (res.data.msg == \"今日未打卡\") {\n        this.signin = false;\n      } else {\n        this.signin = true;\n      }\n    });\n    axios.get('/api/getemail/' + this.username + '/').then(res => {});\n  },\n\n  methods: {\n    getImage(good) {\n      if (good.pic.length == 0) {\n        return '-1.jpg';\n      } else {\n        return good.pic[0];\n      }\n    },\n\n    keyup(e) {\n      let me = this;\n      var key = e.which || e.keyCode;\n\n      if (key == 13) {\n        me.search(e);\n      }\n    },\n\n    handleCurrentChange(currentPage) {\n      this.currentPage = currentPage;\n      let begin = (currentPage - 1) * this.pageSize + 1;\n      let end = currentPage * this.pageSize + 1;\n      axios.get('/api/goods/' + this.active + '/' + begin + '/' + end + '/').then(res => {\n        this.goodsGroup = res.data;\n      });\n    },\n\n    classification(type) {\n      this.active = type;\n      axios.get('/api/goods/' + type + '/1/31/').then(res => {\n        this.goodsGroup = res.data;\n      });\n      this.$axios({\n        method: 'post',\n        url: '/api/goodcount/' + type + '/'\n      }).then(res => {\n        this.sum = res.data.count;\n      }).catch(err => {});\n    },\n\n    async search(e) {\n      let target = e.target;\n\n      if (target.nodeName == 'SPAN' || target.nodeName == 'I') {\n        target = e.target.parentNode;\n      }\n\n      target.blur();\n      await axios.get('/api/search/' + this.content + '/').then(res => {\n        this.goodsGroup = res.data;\n      });\n      this.sum = this.goodsGroup.length;\n    },\n\n    gotoUp() {\n      let top = document.documentElement.scrollTop || document.body.scrollTop; // 实现滚动效果 \n\n      const timeTop = setInterval(() => {\n        document.body.scrollTop = document.documentElement.scrollTop = top -= 50;\n\n        if (top <= 0) {\n          clearInterval(timeTop);\n        }\n      }, 5);\n    },\n\n    gotoBottom() {\n      scrollTo(0, document.documentElement.scrollHeight);\n    },\n\n    flashMoney() {\n      this.$axios.get('/api/signin/' + this.username + '/' + this.password + '/').then(res => {\n        this.money = res.data.money;\n      }).catch(err => {});\n    },\n\n    feedback() {\n      this.feedbackVisible = false;\n      this.$notify({\n        title: '提交成功',\n        message: '感谢您的反馈，我们会继续改进',\n        type: 'success'\n      });\n    },\n\n    changeSignIn() {\n      if (this.signin == false) {\n        this.$axios({\n          method: 'post',\n          url: '/api/check/',\n          data: JSON.stringify({\n            userId: this.username\n          })\n        }).then(res => {\n          this.signin = true;\n        });\n        this.$notify({\n          title: '打卡成功',\n          message: '记得坚持打卡喔',\n          type: 'success'\n        });\n      } else {\n        this.$notify({\n          title: '重复打卡',\n          message: '今天打过卡了喔',\n          type: 'error'\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA4HA;AACA;AACA;AACA;AACA;AACA;EACAA,gBADA;EAEAC;IACAC,SADA;IAEAC,QAFA;IAGAC,MAHA;IAIAC;EAJA,CAFA;;EAQAC;IACA;MACAC,YADA;MAEAC,YAFA;MAGAC,SAHA;MAIAC,OAJA;MAKAC,WALA;MAMAC,WANA;MAOAC,oEAPA;MAQAC,QARA;MASAC,SATA;MAUAC,cAVA;MAWAC,YAXA;MAYAC,cAZA;MAaAC,aAbA;MAcAC,SAdA;MAeAC,SAfA;MAgBAC,sBAhBA;MAiBAC,mBAjBA;MAkBAC,kBAlBA;MAmBAC,aAnBA;MAoBAC,iBApBA;MAqBAC;IArBA;EAuBA,CAhCA;;EAiCAC;IACAC;MACA;IACA;EAHA,CAjCA;;EAsCAC;IACAC;IACA;IACA;IACA;IACA;IACA;IACA;MACAC,cADA;MAEAC;IAFA,GAIAC,IAJA,CAIAC;MACA;IACA,CANA,EAMAC,KANA,CAMAC,QAEA,CARA;IAUAC,sCACAJ,IADA,CACAC;MACA;IACA,CAHA;IAKAG;MACA;IACA,CAFA;IAIAA;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CANA;IAQAA,+DAEA,CAFA;EAIA,CA5EA;;EA6EAC;IACAC;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CAPA;;IAQAC;MACA;MACA;;MACA;QACAC;MACA;IACA,CAdA;;IAeAC;MACA;MACA;MACA;MACAL;QACA;MACA,CAFA;IAGA,CAtBA;;IAuBAM;MACA;MACAN;QACA;MACA,CAFA;MAGA;QACAN,cADA;QAEAC;MAFA,GAIAC,IAJA,CAIAC;QACA;MACA,CANA,EAMAC,KANA,CAMAC,QAEA,CARA;IAUA,CAtCA;;IAuCA;MACA;;MACA;QACAQ;MACA;;MACAA;MACA;QACA;MACA,CAFA;MAGA;IAEA,CAlDA;;IAmDAC;MACA,wEADA,CAEA;;MACA;QACAf;;QACA;UACAgB;QACA;MACA,CALA,EAKA,CALA;IAMA,CA5DA;;IA6DAC;MACAC;IACA,CA/DA;;IAgEAC;MACA;QACA;MACA,CAFA,EAEAd,KAFA,CAEAC,SAFA;IAGA,CApEA;;IAqEAc;MACA;MACA;QACAC,aADA;QAEAC,yBAFA;QAGAC;MAHA;IAKA,CA5EA;;IA6EAC;MACA;QACA;UACAvB,cADA;UAEAC,kBAFA;UAGA3B;YACAkD;UADA;QAHA,GAMAtB,IANA,CAMAC;UACA;QACA,CARA;QASA;UACAiB,aADA;UAEAC,kBAFA;UAGAC;QAHA;MAKA,CAfA,MAeA;QACA;UACAF,aADA;UAEAC,kBAFA;UAGAC;QAHA;MAKA;IACA;;EApGA;AA7EA","names":["name","components","MySidebar","MyButton","MyCard","MyCartButton","data","username","password","goods","pic","content","active","el_pic","mail","money","currentPage","pageSize","goodsGroup","sessionid","sum","carts","feedbackVisible","feedbackContent","formLabelWidth","signin","buy_change","money_change","computed","welcome","created","document","method","url","then","res","catch","err","axios","methods","getImage","keyup","me","handleCurrentChange","classification","target","gotoUp","clearInterval","gotoBottom","scrollTo","flashMoney","feedback","title","message","type","changeSignIn","userId"],"sourceRoot":"src/views","sources":["MainFace.vue"],"sourcesContent":["<template>\n<div>\n    <span @click=\"flashMoney\">\n        <MySidebar v-bind:money=\"money\" v-bind:password=\"password\"\n        v-bind:username=\"username\" v-bind:mymail=\"mail\">\n        </MySidebar>\n    </span>\n    \n    <div class=\"center\">\n        <div style=\"position: absolute;margin-left:15%;margin-top:-1%\">\n            <img src=\"../assets/LOGO1.png\" width=\"150\">\n        </div>\n        <div class=\"logo\" style=\"text-align:center;display: inline-block;\">\n            <div>烧瓶</div>\n            <div style=\"font-size: 16px;\">心仪生活上烧瓶</div>\n        </div>\n        <div style=\"display: inline-block;\">\n            <div class=\"search-box\" style=\"margin-right: 40px;\">\n                <input type=\"text\" v-model=\"content\" style=\"border:0px;outline:0px;font-size:16px;height: 30px;padding-top: 5px;padding-bottom: 5px;\" size=\"50\" :placeholder=\"welcome\">\n                <MyButton @click.native=\"search\" style=\"height: 37px;font-size:15px\" msg=\"开始烧瓶\"></MyButton>\n            </div>\n            <div class=\"type-box\">\n                <span style=\"margin-right: 10px\" @click.prevent=\"classification(1)\"><a href=# :class=\"{'activeCss':active==1}\">药品</a></span>\n                <span style=\"margin-right: 10px\" @click.prevent=\"classification(2)\"><a href=# :class=\"{'activeCss':active==2}\">食品饮料</a></span>\n                <span style=\"margin-right: 10px\" @click.prevent=\"classification(3)\"><a href=# :class=\"{'activeCss':active==3}\">文学</a></span>\n                <span style=\"margin-right: 10px\" @click.prevent=\"classification(4)\"><a href=# :class=\"{'activeCss':active==4}\">日常用品</a></span>\n            </div>\n        </div>\n        <div style=\"display: inline-block;margin-bottom: 1%;\">\n            <MyCartButton style=\"z-index:999;position:absolute;\" v-bind:username=\"username\"></MyCartButton>\n        </div>\n    </div>\n    \n    <div style=\"width:70%;margin:0 auto\">\n        <el-carousel :interval=\"3000\" type=\"card\" height=\"400px\">\n            <el-carousel-item v-for=\"item in el_pic\">\n                <img :src=\"require('../assets/'+ item)\" class=\"picture\">\n            </el-carousel-item>\n\n        </el-carousel>\n    </div>\n        \n    <div id=\"main\">\n\n    <div class=\"elevator\">\n        <div class=\"elevator-item\" @click=\"gotoUp\">\n            <i class=\"el-icon-sort-up\" ></i>\n            <span class=\"elevator-text\">\n                顶部\n            </span>\n        </div>\n        <div class=\"elevator-item\" @click=\"changeSignIn\">\n            <i class=\"el-icon-close\" v-if=\"signin==false\"></i>\n            <i class=\"el-icon-check\" v-else></i>\n            <span class=\"elevator-text\">\n                打卡\n            </span>\n        </div>\n        <div class=\"elevator-item\">\n            <i class=\"el-icon-headset\"></i>\n            <span class=\"elevator-text\">\n                客服\n            </span>\n        </div>\n        <div class=\"elevator-item\" @click=\"feedbackVisible = true;\">\n            <i class=\"el-icon-edit\"></i>\n            <span class=\"elevator-text\">\n                反馈\n            </span>\n        </div>\n        <div class=\"elevator-item\" @click=\"gotoBottom\">\n            <i class=\"el-icon-sort-down\"></i>\n            <span class=\"elevator-text\">\n                底部\n            </span>\n        </div>\n    </div>\n\n        <div v-if=\"goodsGroup.length===0\" style=\"margin-top:3%\">\n            <el-skeleton :rows=\"30\" animated />\n        </div>\n             \n        <div v-for=\"good in goodsGroup\" \n        style=\"display: inline-block;margin-bottom: 5%;\" >   \n        <Transition appear name=\"slide-fade\">\n            <MyCard v-bind:price=\"good.price\" v-bind:name=\"good.description\" v-bind:id=\"good.id\" \n            v-bind:picture=\"getImage(good)\" v-bind:availCount=\"good.availCount\"\n            v-bind:soldCount=\"good.soldCount\" v-bind:username=\"username\"\n            v-bind:address=\"good.address\">\n            </MyCard>\n        </Transition>\n        </div>\n        \n        <div style=\"margin-bottom:10%\">\n            <el-pagination\n              background\n              layout=\"prev, pager, next,jumper, ->, total\"\n              :total=\"sum\"\n              @current-change=\"handleCurrentChange\"\n              :current-page=\"currentPage\"\n              :page-size=\"pageSize\"\n              style=\"text-align: center\">\n            </el-pagination> \n        </div>\n    \n    </div>\n    <el-dialog title=\"反馈\" :visible.sync=\"feedbackVisible\">\n  <el-form>\n    <el-form-item label=\"请抒发您的想法:\" :label-width=\"formLabelWidth\">\n        <el-input v-model=\"feedbackContent\" type=\"textarea\"\n        :autosize=\"{ minRows: 2, maxRows: 100}\">\n        </el-input>\n    </el-form-item>\n  </el-form>\n  <div slot=\"footer\" class=\"dialog-footer\">\n    <el-button @click=\"feedbackVisible = false\">我再想想</el-button>\n    <el-button type=\"primary\" @click=\"feedback\">确定提交</el-button>\n  </div>\n</el-dialog>\n\n</div> \n</template>\n      \n      <script>\n    import axios from 'axios';\n    import MySidebar from '@/components/MySidebar.vue';\n    import MyButton from '@/components/Mybutton.vue';\n    import MyCard from \"@/components/Mycard.vue\";\n    import MyCartButton from '@/components/MyCartButton.vue';\n      export default {\n        name: \"MainFace\",\n        components: {\n            MySidebar,\n            MyButton,\n            MyCard,\n            MyCartButton\n        },\n        data() {\n          return {\n            username: '',\n            password: '',\n            goods: [],\n            pic: '',\n            content: '',\n            active: 999,\n            el_pic:['el-1.jpg','el-2.jpg','el-3.jpg','el-4.jpg','el-5.jpg'],\n            mail : '',\n            money: '',\n            currentPage: 1,\n            pageSize: 30,\n            goodsGroup : [],\n            sessionid: '',\n            sum : 1334,\n            carts: [],\n            feedbackVisible:false,\n            feedbackContent:'',\n            formLabelWidth: \"\",\n            signin: false,\n            buy_change:false,\n            money_change:false\n          }\n        },\n        computed: {\n            welcome: function() {\n                return 'Hi, ' + this.username + '~ 开始您的烧瓶之旅';\n            }\n        },\n        created() {\n            document.addEventListener('keyup',this.keyup);\n            this.username = this.$route.query.userId;\n            this.password = this.$route.query.password;\n            this.money = this.$route.query.money;\n            this.mail = this.$route.query.mail;\n            this.sessionid = this.$route.query.sessionid;\n            this.$axios({\n                    method: 'post',\n                    url: '/api/goodcount/999/'\n                    })\n                .then(res => {\n                    this.sum=res.data.count;           \n                }).catch ((err) => {\n                    \n                });\n                \n            axios.get('/api/goods/999/1/31/',{\n            }).then((res) => {\n                this.goodsGroup = res.data;             \n            });\n\n            axios.get('/api/getcart/' + this.username + '/').then((res) => {\n                this.carts = res.data;\n            });\n\n            axios.get('/api/ischecked/' + this.username + '/').then((res) => {\n                if (res.data.msg==\"今日未打卡\") {\n                    this.signin = false;\n                } else {\n                    this.signin = true;\n                }\n            })\n\n            axios.get('/api/getemail/' + this.username + '/').then((res) => {\n                \n            })\n\n        },\n        methods: {\n            getImage(good) {\n                if (good.pic.length == 0) {\n                    return '-1.jpg';\n                } else {\n                    return good.pic[0];\n                }\n            },\n            keyup(e) {\n                let me = this;\n                var key = e.which || e.keyCode;\n                if (key == 13) {\n                    me.search(e);\n                }\n            },\n            handleCurrentChange(currentPage) {\n                this.currentPage = currentPage;\n                let begin = (currentPage-1)*this.pageSize+1;\n                let end = (currentPage)*this.pageSize+1;\n                axios.get('/api/goods/' + this.active + '/' + begin + '/' + end + '/').then((res) => {\n                    this.goodsGroup = res.data;               \n                });\n            },\n            classification(type) {\n                this.active = type;\n                axios.get('/api/goods/' + type + '/1/31/').then((res) => {\n                    this.goodsGroup = res.data;              \n                });\n                this.$axios({\n                    method: 'post',\n                    url: '/api/goodcount/' + type + '/'\n                    })\n                .then(res => {\n                    this.sum=res.data.count;           \n                }).catch ((err) => {\n                    \n                });\n\n            },\n            async search(e) {\n                let target = e.target;\n                if (target.nodeName == 'SPAN' || target.nodeName == 'I') {\n                    target = e.target.parentNode;\n                }\n                target.blur();\n                await axios.get('/api/search/'+this.content+'/').then((res) => {\n                    this.goodsGroup = res.data;              \n                });\n                this.sum = this.goodsGroup.length;\n\n            },\n            gotoUp() {\n                let top = document.documentElement.scrollTop || document.body.scrollTop;\n                // 实现滚动效果 \n                const timeTop = setInterval(() => {\n                    document.body.scrollTop = document.documentElement.scrollTop = top -= 50;\n                    if (top <= 0) {\n                        clearInterval(timeTop);\n                    }\n                }, 5);\n            },\n            gotoBottom() {\n                 scrollTo(0, document.documentElement.scrollHeight);\n            },\n            flashMoney() {\n                this.$axios.get('/api/signin/' + this.username + '/' + this.password + '/').then((res) => {\n                    this.money = res.data.money;\n                }).catch((err) => {})\n            },\n            feedback() {\n                this.feedbackVisible = false;\n                this.$notify({\n                    title: '提交成功',\n                    message: '感谢您的反馈，我们会继续改进',\n                    type: 'success'\n                });\n            },\n            changeSignIn() {\n                if (this.signin == false) {\n                    this.$axios({\n                    method: 'post',\n                    url: '/api/check/',\n                    data: JSON.stringify({\n                                userId:this.username\n                            })\n                    }).then(res => {\n                        this.signin = true;\n                    });\n                    this.$notify({\n                        title:'打卡成功',\n                        message:'记得坚持打卡喔',\n                        type:'success'\n                    });\n                } else {\n                    this.$notify({\n                        title:'重复打卡',\n                        message:'今天打过卡了喔',\n                        type:'error'\n                    });\n                }\n            }   \n            \n        }\n\n      }\n      </script>\n      \n      <style scoped>\n        .slide-fade-enter-active {\n            transition: all .8s ease;\n        }\n        .slide-fade-enter, .slide-fade-leave-to {\n            transform: translateY(200px);\n            opacity: 0;\n        }\n        .elevator {\n            position: fixed;\n            right: 1%;\n            top : 20%;\n            text-align: center;\n            background-color: white;\n        }\n        .elevator-item {\n            padding: 8px;\n            padding-bottom: 0;\n            background-color: rgb(227, 227, 227);\n            width: 40px;   \n        }\n        .elevator-text {\n            padding-bottom: 10px;\n            border-bottom-style: solid;\n            border-color: rgb(201, 200, 200);\n            border-width: 1px;\n            display: block;\n        }\n        .elevator :hover {\n            background-color: rgb(174, 0, 255);\n            color: white;\n        }\n        .picture {\n            height: 100%;\n            width:100%;\n            max-width:100%;\n        }\n        .logo {\n            display: inline-block;\n            color: rgb(174, 0, 255);\n            font-size: 30px;\n            font-weight: 600;\n            margin-right: 40px;\n        }\n        a {\n            text-align: center;\n            color: black;\n            text-decoration: none;\n            font-size: 17px;\n        }\n        a:hover {\n            color: red;\n        }\n        .center {\n            margin-top: 10px;\n            text-align: center;\n            margin-bottom: 10px;\n        }\n        button {\n            background-color:rgb(174, 0, 255);\n            color: white;\n        }\n        .search-box{\n            display: inline-block;\n            border-width: 2px;\n            border-style: solid;\n            border-color: rgb(174, 0, 255);\n            padding-left: 0px;\n            padding-top: 0px;\n            padding-bottom: 0px;\n        }\n        #main {\n            background-color: rgb(240, 234, 234);\n            position: absolute;\n            padding-left: 15%;\n            padding-right: 5%;\n            text-align: left;\n            width: 80%;\n        }\n        .goodsPic {\n            display: block;\n            width: 120px;\n            height: 120px;\n            margin: auto;\n            cursor: pointer;\n            transition: 1s;\n        }\n        .goodsPic:hover{\n            transform: scale(1.5);\n        }\n        .goodsBox {\n            position: relative;\n            overflow: hidden;\n            display: inline-block;\n            width: 190px;\n            height: 226px;\n            background-color:white;\n            padding-top: 2.5%;\n            margin-right: 20px;\n            margin-top: 2%;\n        }\n        .goodsTxt {\n            color: gray;\n            font-size: 6px;\n            text-align: center;\n            margin-top: 15%;\n            display: -webkit-box;\n            -webkit-box-orient: vertical;\n            -webkit-line-clamp: 2;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            width: 180px;\n        }\n        .price {\n            color: red;\n            font-size: 20px;\n            font-weight: 600;\n            position: absolute;\n            bottom: 10px;\n            left:50px\n        }\n\n        .type-box {\n            padding-left: 60px;\n            padding-right: 80px;\n            padding-top: 13px;\n            width: 340px;\n            display: flex;\n            justify-content: space-between;\n            flex: auto;\n        }\n        .activeCss {\n            color: red;\n        }\n      </style>"]},"metadata":{},"sourceType":"module"}
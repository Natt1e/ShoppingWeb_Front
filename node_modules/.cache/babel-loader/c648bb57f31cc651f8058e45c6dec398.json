{"ast":null,"code":"import Mybutton from '@/components/Mybutton.vue';\nimport axios from 'axios';\nexport default {\n  name: \"Detail\",\n  components: {\n    Mybutton\n  },\n\n  async created() {\n    this.id = this.$route.query.id;\n    this.username = this.$route.query.username;\n    await this.$axios({\n      method: 'post',\n      url: '/api/gooddetail/',\n      data: JSON.stringify({\n        user: this.username,\n        good: this.id\n      })\n    }).then(res => {\n      this.name = res.data.description;\n      this.pic = res.data.pic[0];\n      this.price = res.data.price;\n      this.availCount = res.data.availCount;\n      this.soldCount = res.data.soldCount;\n      this.address = res.data.address;\n      this.seller = res.data.seller;\n      this.grade = res.data.grade;\n      this.commentCount = res.data.commentCount;\n    }).catch(err => {});\n    axios.get('/api/getcomments/' + this.id + '/').then(res => {\n      this.comments = res.data;\n    });\n  },\n\n  data() {\n    return {\n      username: '',\n      id: 0,\n      name: '小羊 崭新出厂 statTrak☆ 磨损0.00054250 全新现货',\n      pic: \"100.jpg\",\n      price: '123',\n      availCount: 999,\n      soldCount: 888,\n      address: '北京魏永分货中心',\n      seller: 'seller',\n      grade: 8.8,\n      commentCount: 0,\n      colors: [{\n        color: '#f56c6c',\n        percentage: 20\n      }, {\n        color: '#e6a23c',\n        percentage: 40\n      }, {\n        color: '#5cb87a',\n        percentage: 60\n      }, {\n        color: '#1989fa',\n        percentage: 80\n      }, {\n        color: '#6f7ad3',\n        percentage: 100\n      }],\n      count: 1,\n      cartVisiable: false,\n      comments: []\n    };\n  },\n\n  methods: {\n    img() {\n      return this.pic;\n    },\n\n    addTocart() {\n      this.$axios({\n        method: 'post',\n        url: '/api/addcart/',\n        data: JSON.stringify({\n          buyer: this.username,\n          good: Number(this.id),\n          count: this.count\n        })\n      }).then(res => {}).catch(err => {});\n      this.cartVisiable = false;\n      this.$notify({\n        title: '成功',\n        message: '已成功添加至购物车',\n        type: 'success'\n      });\n    },\n\n    buy() {}\n\n  }\n};","map":{"version":3,"mappings":"AA2FA;AACA;AACA;EACAA,cADA;EAEAC;IACAC;EADA,CAFA;;EAKA;IACA;IACA;IACA;MACAC,cADA;MAEAC,uBAFA;MAGAC;QACAC,mBADA;QAEAC;MAFA;IAHA,GAQAC,IARA,CAQAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA,CAlBA,EAkBAC,KAlBA,CAkBAC,QAEA,CApBA;IAsBAC;MACA;IACA,CAFA;EAIA,CAlCA;;EAmCAP;IACA;MACAQ,YADA;MAEAC,KAFA;MAGAd,2CAHA;MAIAe,cAJA;MAKAC,YALA;MAMAC,eANA;MAOAC,cAPA;MAQAC,mBARA;MASAC,gBATA;MAUAC,UAVA;MAWAC,eAXA;MAYAC,SACA;QAAAC;QAAAC;MAAA,CADA,EAEA;QAAAD;QAAAC;MAAA,CAFA,EAGA;QAAAD;QAAAC;MAAA,CAHA,EAIA;QAAAD;QAAAC;MAAA,CAJA,EAKA;QAAAD;QAAAC;MAAA,CALA,CAZA;MAmBAC,QAnBA;MAoBAC,mBApBA;MAqBAC;IArBA;EAuBA,CA3DA;;EA4DAC;IACAC;MACA;IACA,CAHA;;IAIAC;MACA;QACA5B,cADA;QAEAC,oBAFA;QAGAC;UACA2B,oBADA;UAEAzB,qBAFA;UAGAmB;QAHA;MAHA,GASAlB,IATA,CASAC,QACA,CAVA,EAUAC,KAVA,CAUAC,QACA,CAXA;MAYA;MACA;QACAsB,WADA;QAEAC,oBAFA;QAGAC;MAHA;IAKA,CAvBA;;IAwBAC,OACA;;EAzBA;AA5DA","names":["name","components","Mybutton","method","url","data","user","good","then","res","catch","err","axios","username","id","pic","price","availCount","soldCount","address","seller","grade","commentCount","colors","color","percentage","count","cartVisiable","comments","methods","img","addTocart","buyer","title","message","type","buy"],"sourceRoot":"src/views","sources":["GoodDetail.vue"],"sourcesContent":["<template>\r\n<div class=\"body\">\r\n<Transition appear name=\"slide-fadeup\">\r\n    <div class=\"box1\">\r\n        <div class=\"top\"  :style=\"{'backgroundImage': 'url(' + require('../../../static/' + this.pic)  + ')'}\">\r\n        </div>\r\n        <div class=\"text\">\r\n            {{name}}\r\n        </div>\r\n        <div class=\"price\">\r\n            <div style=\"display: inline-block;position: relative;bottom: 30%;\">\r\n                ￥{{price}}\r\n            </div>\r\n            \r\n            <div style=\"display: inline-block;margin-left: 20%;\">\r\n                <div style=\"margin-bottom:15%\">\r\n                    <Mybutton msg=\"立即购买\" @click.native=\"buy\"></Mybutton>\r\n                </div>\r\n                <div >\r\n                    <Mybutton msg=\"加入购物车\" @click.native=\"cartVisiable = true\"></Mybutton>\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n\r\n\r\n        <div class=\"count\">\r\n            商家名称：{{seller}}\r\n        </div>\r\n        <div class=\"count\">\r\n            <span style=\"margin-right:8%\">\r\n                库存量: {{availCount}}\r\n            </span>\r\n            <span>\r\n                已售出：{{soldCount}}\r\n            </span>\r\n        </div>\r\n        <div class=\"grade\" style=\"color: rgb(18, 14, 14);\">\r\n            发货地：{{address}}\r\n        </div>\r\n    </div>\r\n</Transition>   \r\n<Transition appear name=\"slide-fadedown\">\r\n    <div class=\"box2\">    \r\n        <div class=\"grade\">\r\n            评分：{{grade}}\r\n        </div>\r\n        <el-progress type=\"circle\"\r\n        :percentage=\"grade*10*2\" status=\"success\">\r\n        </el-progress>\r\n        <div class=\"grade\">\r\n            Comments\r\n        </div>\r\n\r\n        <div v-if=\"commentCount == 0\" style=\"color: rgb(199, 199, 199);font-weight: 800;font-size: 20px;margin-top: 10%;\">\r\n            暂无评价\r\n        </div>\r\n\r\n\r\n        <div v-if=\"commentCount != 0\">\r\n            <div class=\"comment\" v-for=\"comment in comments\">\r\n                <span class=\"commentGrade\">\r\n                    grade: comment.\r\n                </span>\r\n                好商品\r\n                <span class=\"time\">\r\n                    2022-12-16T21:10:06.177642\r\n                </span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</Transition>    \r\n\r\n    <el-dialog\r\n    title=\"选择数量\"\r\n    :visible.sync=\"cartVisiable\"\r\n    width=\"30%\"\r\n    center>\r\n        <div style=\"margin:auto;text-align:center\">\r\n            <el-input-number v-model=\"count\"  :min=\"1\"  label=\"描述文字\"></el-input-number>\r\n        </div>\r\n        \r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"cartVisiable = false\">我再想想</el-button>\r\n            <el-button type=\"primary\" @click=\"addTocart\">立即加入</el-button>\r\n        </span>\r\n    </el-dialog>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n    import Mybutton from '@/components/Mybutton.vue';\r\n    import axios from 'axios';\r\n    export default {\r\n        name: \"Detail\",\r\n        components: {\r\n            Mybutton\r\n        },\r\n        async created() {\r\n            this.id=this.$route.query.id;\r\n            this.username=this.$route.query.username;\r\n            await this.$axios({\r\n                    method: 'post',\r\n                    url: '/api/gooddetail/',\r\n                    data: JSON.stringify({\r\n                            user: this.username,\r\n                            good: this.id\r\n                            })\r\n                    })\r\n                .then(res => {\r\n                    this.name = res.data.description;\r\n                    this.pic = res.data.pic[0];\r\n                    this.price = res.data.price;\r\n                    this.availCount = res.data.availCount;\r\n                    this.soldCount = res.data.soldCount;\r\n                    this.address = res.data.address;\r\n                    this.seller = res.data.seller;\r\n                    this.grade = res.data.grade;\r\n                    this.commentCount = res.data.commentCount;\r\n                }).catch ((err) => {\r\n                    \r\n                });\r\n\r\n            axios.get('/api/getcomments/' + this.id + '/').then((res) => {\r\n                this.comments = res.data;          \r\n            });\r\n                \r\n        },\r\n        data() {\r\n            return {\r\n                username:'',\r\n                id: 0,\r\n                name: '小羊 崭新出厂 statTrak☆ 磨损0.00054250 全新现货',\r\n                pic: \"100.jpg\",\r\n                price: '123',\r\n                availCount : 999,\r\n                soldCount : 888,\r\n                address: '北京魏永分货中心',\r\n                seller: 'seller',\r\n                grade: 8.8,\r\n                commentCount: 0,\r\n                colors: [\r\n                    {color: '#f56c6c', percentage: 20},\r\n                    {color: '#e6a23c', percentage: 40},\r\n                    {color: '#5cb87a', percentage: 60},\r\n                    {color: '#1989fa', percentage: 80},\r\n                    {color: '#6f7ad3', percentage: 100}\r\n                ],\r\n                count: 1,\r\n                cartVisiable: false,\r\n                comments:[]\r\n            }\r\n        },\r\n        methods: {\r\n            img() {\r\n                return this.pic;\r\n            },\r\n            addTocart() {\r\n                this.$axios({\r\n                    method: 'post',\r\n                    url: '/api/addcart/',\r\n                    data: JSON.stringify({\r\n                            buyer: this.username,\r\n                            good: Number(this.id),\r\n                            count: this.count\r\n                            })\r\n                    })\r\n                .then(res => {         \r\n                }).catch ((err) => {\r\n                });\r\n                this.cartVisiable = false;\r\n                this.$notify({\r\n                    title: '成功',\r\n                    message: '已成功添加至购物车',\r\n                    type: 'success'\r\n                });\r\n            },\r\n            buy() {\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n\r\n<style scoped>\r\n\r\n    .body {\r\n        position : absolute;\r\n\t    width : 100%;\r\n\t    height : 100%;\r\n        background: url(\"../assets/detailBackground.png\") no-repeat;\r\n        background-size:cover;\r\n    }    \r\n    .top::after {\r\n        content: \"\";\r\n        display: block;\r\n        padding-bottom: 100%;\r\n    }\r\n    .top{\r\n      border-radius: 50px; \r\n      width:70%;\r\n      background: no-repeat; \r\n      -webkit-background-size: 100%;\r\n      -moz-background-size: 100%;\r\n      -o-background-size: 100%;\r\n      background-size: 100%;\r\n      margin: auto;\r\n      margin-top:10%;\r\n      margin-bottom: 10%;\r\n    }\r\n    .box1 {\r\n        position: absolute;\r\n        left: 22%;\r\n        top: 20%;\r\n        width: 20%;\r\n        height: 60%;\r\n        background-color: rgb(240, 232, 232);\r\n        opacity: 1;\r\n        border-radius: 50px;\r\n        overflow: auto;\r\n        white-space: nowrap;\r\n        background: url(\"../assets/detail1.jpg\") no-repeat;\r\n        background-size:cover;\r\n    }\r\n    div::-webkit-scrollbar {\r\n        display: none;\r\n    }\r\n    .box2 {\r\n        position: absolute;\r\n        left: 55%;\r\n        top: 20%;\r\n        width: 20%;\r\n        height: 60%;\r\n        background-color: rgb(225, 211, 211);\r\n        opacity: 0.9;\r\n        border-radius: 50px;\r\n        overflow: auto;\r\n        white-space: nowrap;\r\n        background: url(\"../assets/detail2.jpg\") no-repeat;\r\n        background-size:cover;\r\n    }\r\n    .slide-fadeup-enter-active {\r\n            transition: all .8s ease;\r\n        }\r\n    .slide-fadeup-enter, .slide-fadeup-leave-to {\r\n            transform: translateY(215px);\r\n            opacity: 0;\r\n    }\r\n    .slide-fadedown-enter-active {\r\n            transition: all .8s ease;\r\n        }\r\n    .slide-fadedown-enter, .slide-fadedown-leave-to {\r\n            transform: translateY(-200px);\r\n            opacity: 0;\r\n    }\r\n\r\n    .text {\r\n        color: rgb(18, 14, 14);\r\n        text-align: center;\r\n        word-wrap: break-word;\r\n        white-space: pre-wrap;\r\n        width: 90%;\r\n        margin: auto;\r\n        font-weight: 800;\r\n        font-size: 20px;\r\n    }\r\n    .price {\r\n        color: rgb(18, 14, 14);\r\n        margin-top: 10%;\r\n        font-weight: 900;\r\n        font-size: 21px;\r\n        text-align: left;\r\n        width: 100%;\r\n        height: 20%;\r\n        padding-left: 10%;\r\n    }\r\n    button {\r\n            color: white;\r\n            background-color: rgb(192, 48, 221);\r\n            font-size: 18px;\r\n        }\r\n    .count {\r\n        color: rgb(18, 14, 14);\r\n        margin-top: 5%;\r\n        font-size: 17px;\r\n        font-weight: 600;\r\n    }\r\n    .grade {\r\n        color: rgb(199, 199, 199);\r\n        font-weight: 800;\r\n        font-size: 20px;\r\n        text-align: center;\r\n        padding-top: 10%;\r\n        margin-bottom: 5%;\r\n    }\r\n    .comment {\r\n        color: rgb(199, 199, 199);\r\n        border-bottom-style: solid;\r\n        border-color:darkmagenta;\r\n        border-width: 0.5px;\r\n        width: 80%;\r\n        padding-bottom: 2%;\r\n        margin: auto;\r\n        font-size: 19px;\r\n    }\r\n    .commentGrade {\r\n        color: rgb(199, 199, 199);\r\n        font-weight: 700;\r\n        font-size: 18px;\r\n        display: block;\r\n        text-align: left;\r\n    }\r\n    .time {\r\n        color: rgb(199, 199, 199);\r\n        margin-top: 5%;\r\n        display: block;\r\n        text-align: right;\r\n        font-size: 15px;\r\n        font-weight: 600;\r\n    }\r\n</style>"]},"metadata":{},"sourceType":"module"}
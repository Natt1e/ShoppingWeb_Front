{"ast":null,"code":"import axios from 'axios';\nimport MySidebar from '@/components/MySidebar.vue';\nimport MyButton from '@/components/Mybutton.vue';\nimport MyCard from \"@/components/Mycard.vue\";\nimport MyCartButton from '@/components/MyCartButton.vue';\nexport default {\n  name: \"MainFace\",\n  components: {\n    MySidebar,\n    MyButton,\n    MyCard,\n    MyCartButton\n  },\n\n  data() {\n    return {\n      username: '',\n      goods: [],\n      pic: '',\n      content: '',\n      active: 0,\n      el_pic: ['el-1.jpg', 'el-2.jpg', 'el-3.jpg'],\n      mail: '',\n      money: '',\n      currentPage: 1,\n      pageSize: 30,\n      goodsGroup: [],\n      sessionid: '',\n      sum: 1334,\n      carts: []\n    };\n  },\n\n  computed: {\n    welcome: function () {\n      return 'Hi, ' + this.username + '~ 开始您的烧瓶之旅';\n    }\n  },\n\n  created() {\n    document.addEventListener('keyup', this.keyup);\n    this.username = this.$route.query.userId;\n    this.money = this.$route.query.money;\n    this.mail = this.$route.query.mail;\n    this.sessionid = this.$route.query.sessionid;\n    this.$axios({\n      method: 'post',\n      url: '/api/goodcount/'\n    }).then(res => {\n      this.sum = res.data.count;\n    }).catch(err => {});\n    axios.get('/api/goods/1/31/', {}).then(res => {\n      this.goodsGroup = res.data;\n    });\n    axios.get('/api/getcart/' + this.username + '/').then(res => {\n      this.carts = res.data;\n    });\n  },\n\n  methods: {\n    keyup(e) {\n      let me = this;\n      var key = e.which || e.keyCode;\n\n      if (key == 13) {\n        me.search(e);\n      }\n    },\n\n    handleCurrentChange(currentPage) {\n      this.currentPage = currentPage;\n      let begin = (currentPage - 1) * this.pageSize + 1;\n      let end = currentPage * this.pageSize + 1;\n      axios.get('/api/goods/' + begin + '/' + end + '/').then(res => {\n        this.goodsGroup = res.data;\n      });\n    },\n\n    classification(type) {\n      this.active = type;\n      axios.get('/api/goodtype/' + type + '/').then(res => {\n        this.goods = res.data;\n      });\n    },\n\n    search(e) {\n      let target = e.target;\n\n      if (target.nodeName == 'SPAN' || target.nodeName == 'I') {\n        target = e.target.parentNode;\n      }\n\n      target.blur();\n      axios.get('/api/goodsearch/' + this.content + '/').then(res => {\n        this.goods = res.data;\n      });\n    },\n\n    gotoUp() {\n      let top = document.documentElement.scrollTop || document.body.scrollTop; // 实现滚动效果 \n\n      const timeTop = setInterval(() => {\n        document.body.scrollTop = document.documentElement.scrollTop = top -= 50;\n\n        if (top <= 0) {\n          clearInterval(timeTop);\n        }\n      }, 5);\n    },\n\n    gotoBottom() {\n      scrollTo(0, document.documentElement.scrollHeight);\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAyHA;AACA;AACA;AACA;AACA;AACA;EACAA,gBADA;EAEAC;IACAC,SADA;IAEAC,QAFA;IAGAC,MAHA;IAIAC;EAJA,CAFA;;EAQAC;IACA;MACAC,YADA;MAEAC,SAFA;MAGAC,OAHA;MAIAC,WAJA;MAKAC,SALA;MAMAC,4CANA;MAOAC,QAPA;MAQAC,SARA;MASAC,cATA;MAUAC,YAVA;MAWAC,cAXA;MAYAC,aAZA;MAaAC,SAbA;MAcAC;IAdA;EAgBA,CAzBA;;EA0BAC;IACAC;MACA;IACA;EAHA,CA1BA;;EA+BAC;IACAC;IAEA;IACA;IACA;IACA;IACA;MACAC,cADA;MAEAC;IAFA,GAIAC,IAJA,CAIAC;MACA;IACA,CANA,EAMAC,KANA,CAMAC,QAEA,CARA;IAUAC,kCACAJ,IADA,CACAC;MACA;IACA,CAHA;IAKAG;MACA;IACA,CAFA;EAIA,CAzDA;;EA0DAC;IACAC;MACA;MACA;;MACA;QACAC;MACA;IACA,CAPA;;IAQAC;MACA;MACA;MACA;MACAJ;QACA;MACA,CAFA;IAGA,CAfA;;IAgBAK;MACA;MACAL;QACA;MACA,CAFA;IAGA,CArBA;;IAsBAM;MACA;;MACA;QACAC;MACA;;MACAA;MACAP;QACA;MACA,CAFA;IAGA,CA/BA;;IAgCAQ;MACA,wEADA,CAEA;;MACA;QACAf;;QACA;UACAgB;QACA;MACA,CALA,EAKA,CALA;IAMA,CAzCA;;IA0CAC;MACAC;IACA;;EA5CA;AA1DA","names":["name","components","MySidebar","MyButton","MyCard","MyCartButton","data","username","goods","pic","content","active","el_pic","mail","money","currentPage","pageSize","goodsGroup","sessionid","sum","carts","computed","welcome","created","document","method","url","then","res","catch","err","axios","methods","keyup","me","handleCurrentChange","classification","search","target","gotoUp","clearInterval","gotoBottom","scrollTo"],"sourceRoot":"src/views","sources":["MainFace.vue"],"sourcesContent":["<template>\n<div>\n    <MySidebar v-bind:money=\"money\" v-bind:username=\"username\"></MySidebar>\n    <div class=\"center\">\n        <div style=\"position: absolute;margin-left:15%;margin-top:-1%\">\n            <img src=\"../assets/LOGO1.png\" width=\"150\">\n        </div>\n        <div class=\"logo\" style=\"text-align:center;display: inline-block;\">\n            <div>烧瓶</div>\n            <div style=\"font-size: 16px;\">心仪生活上烧瓶</div>\n        </div>\n        <div style=\"display: inline-block;\">\n            <div class=\"search-box\" style=\"margin-right: 40px;\">\n                <input type=\"text\" v-model=\"content\" style=\"border:0px;outline:0px;font-size:16px;height: 30px;padding-top: 5px;padding-bottom: 5px;\" size=\"50\" :placeholder=\"welcome\">\n                <!-- <el-button type=\"primary\" @click=\"search\" style=\"height: 37px;font-size:15px\">开始烧瓶</el-button> -->\n                <MyButton @click.native=\"search\" style=\"height: 37px;font-size:15px\" msg=\"开始烧瓶\"></MyButton>\n            </div>\n            <div class=\"type-box\">\n                <span style=\"margin-right: 10px\" @click.prevent=\"classification(1)\"><a href=# :class=\"{'activeCss':active==1}\">食品饮料</a></span>\n                <span style=\"margin-right: 10px\" @click.prevent=\"classification(2)\"><a href=# :class=\"{'activeCss':active==2}\">日常用品</a></span>\n                <span style=\"margin-right: 10px\" @click.prevent=\"classification(3)\"><a href=# :class=\"{'activeCss':active==3}\">文学</a></span>\n                <span style=\"margin-right: 10px\" @click.prevent=\"classification(4)\"><a href=# :class=\"{'activeCss':active==4}\">医药</a></span>\n            </div>\n        </div>\n        <div style=\"display: inline-block;margin-bottom: 1%;\">\n            <MyCartButton style=\"z-index:999;position:absolute;\" v-bind:goods=\"carts\"></MyCartButton>\n                <!-- <MyButton msg=\"我的购物车\" @click.native=\"click_cart\" style=\"height: 37px;font-size:16px\"></MyButton> -->\n            \n            \n            <!-- <span @click=\"click_order\" style=\"margin-right:20px\"><el-button type=\"primary\" style=\"height: 37px;font-size:16px\">我的订单</el-button></span>\n            <span @click=\"click_cart\" style=\"margin-right:20px\"><el-button type=\"primary\" style=\"height: 37px;font-size:16px\">我的购物车</el-button></span>\n            <span><el-button type=\"primary\" style=\"height: 37px;font-size:16px\">联系客服</el-button></span> -->\n        </div>\n    </div>\n    \n    <div style=\"width:70%;margin:0 auto\">\n        <el-carousel :interval=\"3000\" type=\"card\" height=\"400px\">\n            <el-carousel-item v-for=\"item in el_pic\">\n                <img :src=\"require('../assets/'+ item)\" class=\"picture\">\n            </el-carousel-item>\n\n        </el-carousel>\n    </div>\n        \n\n\n    <!-- <div id = \"main\">\n        <div class = \"goodsBox\" v-for=\"good in goods\" @click=\"click_detail(good)\">\n            <img :src=\"img(good)\" class=\"goodsPic\">\n          \n            <div class=\"goodsTxt\">\n                {{good.description}}\n            </div>\n\n            <div class=\"price\">\n                ￥{{good.price}}\n            </div>\n        </div>\n    </div> -->\n    <div id=\"main\">\n\n    <div class=\"elevator\">\n        <div class=\"elevator-item\" @click=\"gotoUp\">\n            <i class=\"el-icon-sort-up\" ></i>\n            <span class=\"elevator-text\">\n                顶部\n            </span>\n        </div>\n        <div class=\"elevator-item\">\n            <i class=\"el-icon-headset\"></i>\n            <span class=\"elevator-text\">\n                客服\n            </span>\n        </div>\n        <div class=\"elevator-item\">\n            <i class=\"el-icon-edit\"></i>\n            <span class=\"elevator-text\">\n                反馈\n            </span>\n        </div>\n        <div class=\"elevator-item\" @click=\"gotoBottom\">\n            <i class=\"el-icon-sort-down\"></i>\n            <span class=\"elevator-text\">\n                底部\n            </span>\n        </div>\n    </div>\n\n        <div v-if=\"goodsGroup.length===0\" style=\"margin-top:3%\">\n            <el-skeleton :rows=\"30\" animated />\n        </div>\n             \n        <div v-for=\"good in goodsGroup\" \n        style=\"display: inline-block;margin-bottom: 5%;\" >   \n        <Transition appear name=\"slide-fade\">\n            <MyCard v-bind:price=\"good.price\" v-bind:name=\"good.description\" v-bind:id=\"good.id\" \n            v-bind:picture=\"good.pic[0]\" v-bind:availCount=\"good.availCount\"\n            v-bind:soldCount=\"good.soldCount\" v-bind:username=\"username\"\n            v-bind:address=\"good.address\">\n            </MyCard>\n        </Transition>\n        </div>\n        \n        <div style=\"margin-bottom:10%\">\n            <el-pagination\n              background\n              layout=\"prev, pager, next,jumper, ->, total\"\n              :total=\"sum\"\n              @current-change=\"handleCurrentChange\"\n              :current-page=\"currentPage\"\n              :page-size=\"pageSize\"\n              style=\"text-align: center\">\n            </el-pagination> \n        </div>\n    \n    </div>\n\n</div> \n</template>\n      \n      <script>\n    import axios from 'axios';\n    import MySidebar from '@/components/MySidebar.vue';\n    import MyButton from '@/components/Mybutton.vue';\n    import MyCard from \"@/components/Mycard.vue\";\n    import MyCartButton from '@/components/MyCartButton.vue';\n      export default {\n        name: \"MainFace\",\n        components: {\n            MySidebar,\n            MyButton,\n            MyCard,\n            MyCartButton\n        },\n        data() {\n          return {\n            username: '',\n            goods: [],\n            pic: '',\n            content: '',\n            active: 0,\n            el_pic:['el-1.jpg','el-2.jpg','el-3.jpg'],\n            mail : '',\n            money: '',\n            currentPage: 1,\n            pageSize: 30,\n            goodsGroup : [],\n            sessionid: '',\n            sum : 1334,\n            carts: []\n          }\n        },\n        computed: {\n            welcome: function() {\n                return 'Hi, ' + this.username + '~ 开始您的烧瓶之旅';\n            }\n        },\n        created() {\n            document.addEventListener('keyup',this.keyup);\n            \n            this.username = this.$route.query.userId;\n            this.money = this.$route.query.money;\n            this.mail = this.$route.query.mail;\n            this.sessionid = this.$route.query.sessionid;\n            this.$axios({\n                    method: 'post',\n                    url: '/api/goodcount/',\n                    })\n                .then(res => {\n                    this.sum=res.data.count;           \n                }).catch ((err) => {\n                    \n                });\n                \n            axios.get('/api/goods/1/31/',{\n            }).then((res) => {\n                this.goodsGroup = res.data;              \n            });\n\n            axios.get('/api/getcart/' + this.username + '/').then((res) => {\n                this.carts = res.data;\n            });\n\n        },\n        methods: {\n            keyup(e) {\n                let me = this;\n                var key = e.which || e.keyCode;\n                if (key == 13) {\n                    me.search(e);\n                }\n            },\n            handleCurrentChange(currentPage) {\n                this.currentPage = currentPage;\n                let begin = (currentPage-1)*this.pageSize+1;\n                let end = (currentPage)*this.pageSize+1;\n                axios.get('/api/goods/' + begin + '/' + end + '/').then((res) => {\n                    this.goodsGroup = res.data;               \n                });\n            },\n            classification(type) {\n                this.active = type;\n                axios.get('/api/goodtype/'+type+'/').then((res) => {\n                    this.goods = res.data;              \n                });\n            },\n            search(e) {\n                let target = e.target;\n                if (target.nodeName == 'SPAN' || target.nodeName == 'I') {\n                    target = e.target.parentNode;\n                }\n                target.blur();\n                axios.get('/api/goodsearch/'+this.content+'/').then((res) => {\n                    this.goods = res.data;              \n                });\n            },\n            gotoUp() {\n                let top = document.documentElement.scrollTop || document.body.scrollTop;\n                // 实现滚动效果 \n                const timeTop = setInterval(() => {\n                    document.body.scrollTop = document.documentElement.scrollTop = top -= 50;\n                    if (top <= 0) {\n                        clearInterval(timeTop);\n                    }\n                }, 5);\n            },\n            gotoBottom() {\n                 scrollTo(0, document.documentElement.scrollHeight);\n            }\n        }\n\n      }\n      </script>\n      \n      <style scoped>\n        .slide-fade-enter-active {\n            transition: all .8s ease;\n        }\n        .slide-fade-enter, .slide-fade-leave-to {\n            transform: translateY(200px);\n            opacity: 0;\n        }\n        .elevator {\n            position: fixed;\n            right: 1%;\n            top : 20%;\n            text-align: center;\n            background-color: white;\n        }\n        .elevator-item {\n            padding: 8px;\n            padding-bottom: 0;\n            background-color: rgb(227, 227, 227);\n            width: 40px;   \n        }\n        .elevator-text {\n            padding-bottom: 10px;\n            border-bottom-style: solid;\n            border-color: rgb(201, 200, 200);\n            border-width: 1px;\n            display: block;\n        }\n        .elevator :hover {\n            background-color: rgb(174, 0, 255);\n            color: white;\n        }\n        .picture {\n            height: 100%;\n            width:100%;\n            max-width:100%;\n        }\n        .logo {\n            display: inline-block;\n            color: rgb(174, 0, 255);\n            font-size: 30px;\n            font-weight: 600;\n            margin-right: 40px;\n        }\n        a {\n            text-align: center;\n            color: black;\n            text-decoration: none;\n            font-size: 17px;\n        }\n        a:hover {\n            color: red;\n        }\n        .center {\n            margin-top: 10px;\n            text-align: center;\n            margin-bottom: 10px;\n        }\n        button {\n            background-color:rgb(174, 0, 255);\n            color: white;\n        }\n        .search-box{\n            display: inline-block;\n            border-width: 2px;\n            border-style: solid;\n            border-color: rgb(174, 0, 255);\n            padding-left: 0px;\n            padding-top: 0px;\n            padding-bottom: 0px;\n        }\n        #main {\n            background-color: rgb(240, 234, 234);\n            position: absolute;\n            padding-left: 15%;\n            padding-right: 5%;\n            text-align: left;\n            width: 80%;\n        }\n        .goodsPic {\n            display: block;\n            width: 120px;\n            height: 120px;\n            margin: auto;\n            cursor: pointer;\n            transition: 1s;\n        }\n        .goodsPic:hover{\n            transform: scale(1.5);\n        }\n        .goodsBox {\n            position: relative;\n            overflow: hidden;\n            display: inline-block;\n            width: 190px;\n            height: 226px;\n            background-color:white;\n            padding-top: 2.5%;\n            margin-right: 20px;\n            margin-top: 2%;\n        }\n        .goodsTxt {\n            color: gray;\n            font-size: 6px;\n            text-align: center;\n            margin-top: 15%;\n            display: -webkit-box;\n            -webkit-box-orient: vertical;\n            -webkit-line-clamp: 2;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            width: 180px;\n        }\n        .price {\n            color: red;\n            font-size: 20px;\n            font-weight: 600;\n            position: absolute;\n            bottom: 10px;\n            left:50px\n        }\n\n        .type-box {\n            padding-left: 60px;\n            padding-right: 80px;\n            padding-top: 13px;\n            width: 340px;\n            display: flex;\n            justify-content: space-between;\n            flex: auto;\n        }\n        .activeCss {\n            color: red;\n        }\n      </style>"]},"metadata":{},"sourceType":"module"}
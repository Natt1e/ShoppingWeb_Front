{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport $ from 'jquery';\nimport Mybutton from './Mybutton.vue';\nimport axios from 'axios';\nexport default {\n  name: 'MyCartButton',\n  props: {\n    username: ''\n  },\n  components: {\n    Mybutton\n  },\n\n  data() {\n    return {\n      visiable: false,\n      goods: [],\n      goodDetail: [],\n      total: 0\n    };\n  },\n\n  methods: {\n    async func1() {\n      await axios.get('/api/getcart/' + this.username + '/').then(res => {\n        this.goods = res.data;\n      });\n\n      for (var i = 0; i < this.goods.length; i++) {\n        await this.$axios({\n          method: 'post',\n          url: '/api/gooddetail/',\n          data: JSON.stringify({\n            user: this.username,\n            good: this.goods[i].id\n          })\n        }).then(res => {\n          this.goodDetail.push(res.data);\n          this.total = this.total + res.data.price * this.goods[i].count;\n        });\n      }\n\n      this.visiable = true;\n      $(\".shopping-cart\").fadeToggle(\"fast\");\n    }\n\n  }\n};","map":{"version":3,"mappings":";AAsCA;AACA;AACA;AACA;EACAA,oBADA;EAEAC;IACAC;EADA,CAFA;EAKAC;IACAC;EADA,CALA;;EAQAC;IACA;MACAC,eADA;MAEAC,SAFA;MAGAC,cAHA;MAIAC;IAJA;EAMA,CAfA;;EAgBAC;IACA;MACA;QACA;MACA,CAFA;;MAIA;QACA;UACAC,cADA;UAEAC,uBAFA;UAGAP;YACAQ,mBADA;YAEAC;UAFA;QAHA,GAOAC,IAPA,CAOAC;UACA;UACA;QACA,CAVA;MAWA;;MAEA;MACAC;IACA;;EAtBA;AAhBA","names":["name","props","username","components","Mybutton","data","visiable","goods","goodDetail","total","methods","method","url","user","good","then","res","$"],"sourceRoot":"src/components","sources":["MyCartButton.vue"],"sourcesContent":["<template>\r\n<div>\r\n  <div style=\"width:5%;\">\r\n        <Mybutton msg=\"我的购物车\" @click.native=\"func1\" ></Mybutton>\r\n  </div> <!--end container -->\r\n\r\n\r\n<div class=\"container\">\r\n  <div class=\"shopping-cart\" v-if=\"visiable==true\">\r\n    <div class=\"shopping-cart-header\">\r\n      <div class=\"shopping-cart-total\">\r\n        <span class=\"lighter-text\">Total:</span>\r\n        <span class=\"main-color-text\">￥{{ total }}</span>\r\n      </div>\r\n    </div> <!--end shopping-cart-header -->\r\n\r\n    <ul class=\"shopping-cart-items\">\r\n      <div v-if=\"goods.length == 0\">\r\n        <el-empty image-size:50px description=\"这里什么都没有呢，快去逛逛叭~\" ></el-empty>\r\n      </div>\r\n          \r\n      \r\n      <li class=\"clearfix\" v-for=\"(value,index) in goodDetail\">\r\n        <div class=\"imageBox\" :style=\"{'backgroundImage': 'url(' + require('../../../static/' + good.pic[0])  + ')'}\"></div>\r\n        <!-- <img :src=\"require(`../../../static/${}`)\" alt=\"item1\" /> -->\r\n        <div class=\"goodName\">{{ value.description }}</div>\r\n        <span class=\"item-name\"></span>\r\n        <span class=\"item-price\">￥</span>\r\n        <span class=\"item-quantity\">数量: {{ goods[index].count }}</span>\r\n      </li>\r\n    </ul>\r\n    <Mybutton msg=\"结算\"></Mybutton>\r\n  </div> <!--end shopping-cart -->\r\n</div> <!--end container -->\r\n</div>\r\n</template>\r\n    \r\n    <script>\r\n    import $ from  'jquery';\r\n    import Mybutton from './Mybutton.vue';\r\n    import axios from 'axios';\r\n        export default {\r\n            name: 'MyCartButton',\r\n            props: {\r\n              username: ''\r\n            },\r\n            components: {\r\n                Mybutton\r\n            },\r\n            data() {\r\n              return {\r\n                visiable:false,\r\n                goods:[],\r\n                goodDetail: [],\r\n                total: 0\r\n              }\r\n            },\r\n            methods: {\r\n                async func1() {\r\n                    await axios.get('/api/getcart/' + this.username + '/').then((res) => {\r\n                        this.goods = res.data;\r\n                    });\r\n\r\n                    for(var i=0;i<this.goods.length;i++) {\r\n                        await this.$axios({\r\n                        method: 'post',\r\n                        url: '/api/gooddetail/',\r\n                        data: JSON.stringify({\r\n                              user: this.username,\r\n                              good:this.goods[i].id\r\n                              })\r\n                      }).then((res) => {\r\n                          this.goodDetail.push(res.data);\r\n                          this.total = this.total + res.data.price * this.goods[i].count;\r\n                      });\r\n                  }   \r\n\r\n                    this.visiable = true;\r\n                    $(\".shopping-cart\").fadeToggle( \"fast\");\r\n                }     \r\n            }\r\n        }\r\n    </script>\r\n    <!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n    <style scoped lang=\"less\">\r\n    .imageBox::after {\r\n        content: \"\";\r\n        display: inline-block;\r\n        padding-bottom: 100%;\r\n    }\r\n.imageBox {\r\n      display:inline-block;\r\n      border-radius: 5px; \r\n      width:40%;\r\n      background: no-repeat; \r\n      -webkit-background-size: 100%;\r\n      -moz-background-size: 100%;\r\n      -o-background-size: 100%;\r\n      background-size: 100%;\r\n      margin: auto;\r\n}\r\n.goodName {\r\n      color: rgb(18, 14, 14);\r\n        text-align: center;\r\n        word-wrap: break-word;\r\n        white-space: pre-wrap;\r\n        width: 90%;\r\n        margin: auto;\r\n        font-weight: 500;\r\n        font-size: 15px;\r\n}\r\n\r\n*, *:before, *:after {\r\n  box-sizing: border-box;\r\n}\r\n\r\nbody {\r\n  font: 14px/22px \"Lato\", Arial, sans-serif;\r\n  background: #6394F8;\r\n}\r\n\r\n.lighter-text {\r\n  color: #ABB0BE;\r\n}\r\n\r\n.main-color-text {\r\n  color: #6394F8;\r\n}\r\n\r\n\r\n.container {\r\n  margin: auto;\r\n  overflow: auto;\r\n}\r\n\r\n\r\n.shopping-cart {\r\n  white-space: nowrap;\r\n  margin: 20px 0;\r\n  float: right;\r\n  background: rgb(251, 240, 240);\r\n  width: 340px;\r\n  height: 500px;\r\n  position: relative;\r\n  border-radius: 3px;\r\n  padding: 20px;\r\n  overflow: auto;\r\n  \r\n  \r\n  .shopping-cart-header {\r\n    border-bottom: 1px solid #E8E8E8;\r\n    padding-bottom: 15px;\r\n    \r\n    .shopping-cart-total {\r\n      float: right;\r\n    }\r\n  }\r\n  \r\n  .shopping-cart-items {\r\n    \r\n    padding-top: 20px;\r\n\r\n      li {\r\n        margin-bottom: 18px;\r\n      }\r\n\r\n    img {\r\n      float: left;\r\n      margin-right: 12px;\r\n    }\r\n    \r\n    .item-name {\r\n      display: block;\r\n      padding-top: 10px;\r\n      font-size: 16px;\r\n    }\r\n    \r\n    .item-price {\r\n      color: #6394F8;\r\n      margin-right: 8px;\r\n    }\r\n    \r\n    .item-quantity {\r\n      color: #ABB0BE;\r\n    }\r\n  }\r\n   \r\n}\r\n\r\n.shopping-cart:after {\r\n\tbottom: 100%;\r\n\tleft: 89%;\r\n\tcontent: \" \";\r\n\theight: 0;\r\n\twidth: 0;\r\n\tposition: absolute;\r\n\tpointer-events: none;\r\n\tborder-bottom-color: white;\r\n\tborder-width: 8px;\r\n\tmargin-left: -8px;\r\n}\r\n\r\nbutton {\r\n     background-color: rgb(192, 48, 221);\r\n     color:white;\r\n}\r\n.clearfix:after {\r\n  content: \"\";\r\n  display: table;\r\n  clear: both;\r\n}\r\n.clearfix {\r\n  border-top-style: solid;\r\n  border-bottom-style: solid;\r\n  border-left-style: solid;\r\n  border-color: #ABB0BE;\r\n  border-width: 0.5px;\r\n  padding-top: 5%;\r\n  padding-bottom: 5%;\r\n  border-radius: 10px;\r\n\r\n}\r\n\r\n\r\n\r\n    </style>"]},"metadata":{},"sourceType":"module"}
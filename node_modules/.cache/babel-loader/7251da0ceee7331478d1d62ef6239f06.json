{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Mybutton from '@/components/Mybutton.vue';\nexport default {\n  name: \"Register\",\n  components: {\n    Mybutton\n  },\n\n  data() {\n    var checkUser = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('用户名不能为空'));\n      } else {\n        callback();\n      }\n    };\n\n    var validatePass = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请输入密码'));\n      } else {\n        if (this.ruleForm.checkPass !== '') {\n          this.$refs.ruleForm.validateField('checkPass');\n        }\n\n        callback();\n      }\n    };\n\n    var validatePass2 = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请再次输入密码'));\n      } else if (value !== this.ruleForm.pass) {\n        callback(new Error('两次输入的密码不一致'));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      ruleForm: {\n        username: '',\n        pass: '',\n        checkPass: ''\n      },\n      username: '',\n      password1: '',\n      password2: '',\n      role: '',\n      show: true,\n      status: 0,\n      correct: true,\n      rules: {\n        pass: [{\n          validator: validatePass,\n          trigger: 'blur'\n        }],\n        checkPass: [{\n          validator: validatePass2,\n          trigger: 'blur'\n        }],\n        username: [{\n          validator: checkUser,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n\n  created() {\n    document.addEventListener('keyup', this.keyup);\n  },\n\n  methods: {\n    keyup(e) {\n      let me = this;\n      var key = e.which || e.keyCode;\n\n      if (key == 13) {\n        me.click_register(e);\n      }\n    },\n\n    click_return() {\n      this.$router.push({\n        name: 'Login'\n      });\n    },\n\n    click_register(e) {\n      let target = e.target;\n\n      if (target.nodeName == 'SPAN' || target.nodeName == 'I') {\n        target = e.target.parentNode;\n      }\n\n      target.blur();\n\n      if (this.username == '') {\n        this.$alert('请输入用户名', '注册失败');\n      } else if (this.password1 == '') {\n        this.$alert('请输入密码', '注册失败');\n      } else if (this.password2 == '') {\n        this.$alert('请再次输入密码', '注册失败');\n      } else if (this.password1 != this.password2) {\n        this.$alert('请输入相同的密码', '注册失败');\n      } else if (this.role == '') {\n        this.$alert('请选择您的身份', '注册失败');\n      } else {\n        this.$axios({\n          method: 'post',\n          url: '/api/signup/',\n          data: JSON.stringify({\n            userId: this.username,\n            passWord: this.password1,\n            type: this.role\n          })\n        }).then(res => {\n          alert('注册成功！欢迎来到烧瓶！');\n          this.$router.push({\n            name: 'Login'\n          });\n        }).catch(err => {\n          if (err.response) {\n            if (err.response.status == 409) {\n              alert('用户名已存在,请更改用户名');\n            }\n          }\n        });\n      }\n    },\n\n    submitForm(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          alert('submit');\n        } else {\n          console.log('error');\n          return false;\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":";AAqEA;AACA;EACAA,gBADA;EAEAC;IACAC;EADA,CAFA;;EAKAC;IACA;MACA;QACA;MACA,CAFA,MAEA;QACAC;MACA;IACA,CANA;;IAOA;MACA;QACAA;MACA,CAFA,MAEA;QACA;UACA;QACA;;QACAA;MACA;IACA,CATA;;IAUA;MACA;QACAA;MACA,CAFA,MAEA;QACAA;MACA,CAFA,MAEA;QACAA;MACA;IACA,CARA;;IASA;MACAC;QACAC,YADA;QAEAC,QAFA;QAGAC;MAHA,CADA;MAMAF,YANA;MAOAG,aAPA;MAQAC,aARA;MASAC,QATA;MAUAC,UAVA;MAWAC,SAXA;MAYAC,aAZA;MAaAC;QACAR,OACA;UAAAS;UAAAC;QAAA,CADA,CADA;QAIAT,YACA;UAAAQ;UAAAC;QAAA,CADA,CAJA;QAOAX,WACA;UAAAU;UAAAC;QAAA,CADA;MAPA;IAbA;EAyBA,CAzDA;;EA0DAC;IACAC;EACA,CA5DA;;EA6DAC;IACAC;MACA;MACA;;MACA;QACAC;MACA;IACA,CAPA;;IAQAC;MACA;QAAAvB;MAAA;IACA,CAVA;;IAWAwB;MACA;;MACA;QACAC;MACA;;MACAA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;UACAC,cADA;UAEAC,mBAFA;UAGAxB;YACAyB,qBADA;YAEAC,wBAFA;YAGAC;UAHA;QAHA,GASAC,IATA,CASAC;UACAC;UACA;YAAAjC;UAAA;QACA,CAZA,EAYAkC,KAZA,CAYAC;UACA;YACA;cACAF;YACA;UACA;QACA,CAlBA;MAmBA;IACA,CAhDA;;IAiDAG;MACA;QACA;UACAH;QACA,CAFA,MAEA;UACAI;UACA;QACA;MACA,CAPA;IAQA;;EA1DA;AA7DA","names":["name","components","Mybutton","data","callback","ruleForm","username","pass","checkPass","password1","password2","role","show","status","correct","rules","validator","trigger","created","document","methods","keyup","me","click_return","click_register","target","method","url","userId","passWord","type","then","res","alert","catch","err","submitForm","console"],"sourceRoot":"src/views","sources":["Register.vue"],"sourcesContent":["<template>\n<div class=\"body\">\n    <Transition appear name=\"logo-fade\">\n        <div style=\"position:absolute;margin-left:5%\">\n            <img src=\"../assets/LOGO1.png\" width=\"300px\">\n        </div>\n    </Transition>\n    \n    \n    <Transition appear name=\"slide-fade\">\n        <div v-show=\"show\" class=\"mainWindow\" key=\"livelist\">\n            \n            <div style=\"padding-top:5%; padding-bottom:5%\">\n                <h1>欢迎来到烧瓶</h1>\n            </div>\n            \n            <el-form :model=\"ruleForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\n  <el-form-item label=\"密码\" prop=\"pass\">\n    <el-input type=\"password\" v-model=\"ruleForm.pass\" autocomplete=\"off\"></el-input>\n  </el-form-item>\n  <el-form-item label=\"确认密码\" prop=\"checkPass\">\n    <el-input type=\"password\" v-model=\"ruleForm.checkPass\" autocomplete=\"off\"></el-input>\n  </el-form-item>\n  <el-form-item label=\"年龄\" prop=\"age\">\n    <el-input v-model.number=\"ruleForm.age\"></el-input>\n  </el-form-item>\n</el-form>\n\n           \n            <div style=\"width:60%;margin:auto;font-size: 20px;display: inline-block;text-align: right;\">\n                <!-- <div class=\"element\">\n                    用户名\n                    <el-input style=\"font-size:20px;width:80%;\" \n                    v-model=\"username\" placeholder=\"请输入用户名\" prefix-icon=\"el-icon-user-solid\" clearable>\n                    </el-input>\n                </div>\n                <div class=\"element\">\n                    密码\n                    <el-input style=\"font-size:20px;width:80%\" \n                    v-model=\"password1\" placeholder=\"请输入密码\" prefix-icon=\"el-icon-lock\" clearable show-password>\n                    </el-input>\n                </div>\n                <div class=\"element\">\n                    确认密码\n                    <el-input style=\"font-size:20px;width:80%\" \n                    v-model=\"password2\" placeholder=\"请再次输入密码\" prefix-icon=\"el-icon-lock\" clearable show-password>\n                    </el-input>\n                </div>\n\n                <div class=\"element\" >\n                    <span style=\"margin-right:15%;display:inline-block\">身份</span>\n                    <el-radio v-model=\"role\" label=\"1\" border >买家</el-radio>\n                    <el-radio v-model=\"role\" label=\"2\" border >卖家</el-radio>\n                    <el-radio v-model=\"role\" label=\"3\" border>客服</el-radio>\n                </div> -->\n            </div>\n\n            \n\n            <div>\n                <Mybutton msg=\"提交\" @click.native=\"submitForm('ruleForm')\"></Mybutton>\n            </div>\n            \n        </div>\n    </Transition>    \n</div>\n</template>\n\n    <script>\n    import Mybutton from '@/components/Mybutton.vue';\n    export default {\n    name: \"Register\",\n    components:{\n        Mybutton\n    },\n    data() {\n        var checkUser = (rule, value, callback) => {\n            if (!value) {\n                return callback(new Error('用户名不能为空'));\n            } else {\n                callback();\n            }\n        };\n        var validatePass = (rule, value, callback) => {\n            if (value === '') {\n                callback(new Error('请输入密码'));\n            } else {\n                if (this.ruleForm.checkPass !== '') {\n                    this.$refs.ruleForm.validateField('checkPass');\n                }\n                callback();\n            }\n        };\n        var validatePass2 = (rule, value, callback) => {\n            if (value === '') {\n                callback(new Error('请再次输入密码'));\n            } else if (value !== this.ruleForm.pass) {\n                callback(new Error('两次输入的密码不一致'));\n            } else {\n                callback();\n            }\n        }\n      return {\n        ruleForm: {\n            username: '',\n            pass: '',\n            checkPass: ''\n        },\n        username: '',\n        password1: '',\n        password2: '',\n        role: '',\n        show: true,\n        status: 0,\n        correct: true,\n        rules: {\n            pass: [\n                {validator:validatePass, trigger: 'blur'}\n            ],\n            checkPass: [\n                { validator:validatePass2, trigger: 'blur'}\n            ],\n            username: [\n                {validator:checkUser, trigger: 'blur'}\n            ]\n        }\n      };\n    },\n    created() {\n        document.addEventListener('keyup',this.keyup);\n    },\n    methods: {\n    keyup(e) {\n        let me = this;\n        var key = e.which || e.keyCode;\n        if (key == 13) {\n            me.click_register(e);\n        }\n      },\n      click_return() {\n        this.$router.push({name:'Login'});\n      },\n      click_register(e) {\n        let target = e.target;\n        if (target.nodeName == 'SPAN' || target.nodeName == 'I') {\n            target = e.target.parentNode;\n        }\n        target.blur();\n        if (this.username=='') {\n            this.$alert('请输入用户名','注册失败');\n        } else if (this.password1=='') {\n            this.$alert('请输入密码','注册失败');\n        } else if (this.password2=='') {\n            this.$alert('请再次输入密码','注册失败');\n        } else if (this.password1 != this.password2) {\n            this.$alert('请输入相同的密码','注册失败');\n        } else if (this.role=='') {\n            this.$alert('请选择您的身份','注册失败');\n        } else {\n            this.$axios({\n                method: 'post',\n                url: '/api/signup/',\n                data: JSON.stringify({\n                        userId: this.username,\n                        passWord: this.password1,\n                        type: this.role\n                        })\n                })\n            .then(res => {\n                alert('注册成功！欢迎来到烧瓶！');\n                this.$router.push({name:'Login'});\n            }).catch ((err) => {\n                if (err.response){\n                    if (err.response.status == 409) {\n                        alert('用户名已存在,请更改用户名');\n                    }                    \n                }\n            })\n        }\n      },\n      submitForm(formName) {\n        this.$refs[formName].validate((valid) => {\n            if (valid) {\n                alert('submit');\n            } else {\n                console.log('error');\n                return false;\n            }\n        });\n      }\n    }\n  }\n    </script>\n\n<style scoped>\n        /* /deep/.el-input__inner {\n            background-color: transparent !important;\n            border: 1px solid #f48888;\n        } */\n        .element {\n            padding-bottom: 8%;\n        }\n        .slide-fade-enter-active {\n            transition: all .8s ease;\n        }\n        .slide-fade-enter, .slide-fade-leave-to {\n            transform: translateY(200px);\n            opacity: 0;\n        }\n        .logo-fade-enter-active {\n            transition: all 2s ease;\n        }\n        .logo-fade-enter, .logo-fade-leave-to {\n            transform: translateX(1000px) rotate(720deg);\n            opacity: 0;\n        }\n        .body {\n            position : absolute;\n\t        width : 100%;\n\t        height : 100%;\n            background: url(\"../assets/registerBackground.png\") no-repeat;\n            background-size:cover;\n        }\n        button{\n            color: white;\n            background-color: rgb(192, 48, 221);\n            font-size: 20px;\n        }\n        .logo {\n            display: inline-block;\n            color: rgb(174, 0, 255);\n            font-size: 36px;\n            font-weight: 700;\n            margin-right: 20px;\n        }\n        .mainWindow {\n            background-color: rgb(250, 219, 219);\n            opacity: 0.9;\n            width: 40%;\n            height: 50%;\n            margin: auto;\n            margin-top: 10%;\n            border-radius: 50px;\n        }\n\n        .registerBtn {\n            font-size: 20px;\n            width: 200px;\n            margin-top: 3%;\n            margin-bottom: 3%;\n            color: white;\n            background-color: rgb(192, 48, 221);\n        }\n</style>"]},"metadata":{},"sourceType":"module"}
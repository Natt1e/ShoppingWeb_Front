{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  name: \"Detail\",\n\n  created() {\n    this.price = this.$route.query.price;\n    this.des = this.$route.query.des;\n    this.id = this.$route.query.id;\n    this.username = this.$route.query.username;\n    this.availCount = this.$route.query.availCount;\n    this.soldCount = this.$route.query.soldCount;\n    axios.get('/api/goodimage/' + this.id + '/').then(res => {\n      this.pic = res.data[0].pic;\n    });\n  },\n\n  data() {\n    return {\n      username: '',\n      price: '',\n      des: '',\n      id: '',\n      pic: '',\n      number: 1,\n      availCount: 0,\n      soldCount: 0,\n      place: '北航'\n    };\n  },\n\n  computed: {\n    welcome: function () {\n      return 'Hi, ' + this.username + '~ 开始您的烧瓶之旅';\n    }\n  },\n  methods: {\n    img() {\n      return this.pic;\n    },\n\n    add() {\n      if (this.number <= 0) {\n        alert('请至少添加一件商品~');\n      } else {\n        this.$axios({\n          method: 'post',\n          url: '/api/addtocart/',\n          data: JSON.stringify({\n            buyerId: this.username,\n            goodId: this.id,\n            count: this.number\n          })\n        });\n        alert('添加成功！');\n      }\n    },\n\n    click_cart() {\n      let routerDate = this.$router.resolve({\n        path: '/cart',\n        query: {\n          id: this.username\n        }\n      });\n      window.open(routerDate.href, '_blank');\n    },\n\n    click_order() {\n      let routerDate = this.$router.resolve({\n        path: '/order',\n        query: {\n          id: this.username\n        }\n      });\n      window.open(routerDate.href, '_blank');\n    },\n\n    buy() {\n      if (this.number <= 0) {\n        alert('请至少添加一件商品~');\n      } else {\n        this.$axios({\n          method: 'post',\n          url: '/api/buy/',\n          data: JSON.stringify({\n            count: this.number,\n            buyerId: this.username,\n            goodId: this.id,\n            place: this.place\n          })\n        }).then(res => {\n          if (res.data == -2) {\n            alert('商品余量不足！');\n          } else if (res.data == -1) {\n            alert('余额不足！');\n          } else {\n            alert('购买成功！欢迎下次光临');\n          }\n        });\n      }\n    },\n\n    back() {\n      this.$router.push({\n        path: '/main',\n        query: {\n          userId: this.id\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":";AA2FA;AACA;EACAA,cADA;;EAEAC;IACA;IACA;IACA;IACA;IACA;IACA;IACAC;MACA;IACA,CAFA;EAGA,CAZA;;EAaAC;IACA;MACAC,YADA;MAEAC,SAFA;MAGAC,OAHA;MAIAC,MAJA;MAKAC,OALA;MAMAC,SANA;MAOAC,aAPA;MAQAC,YARA;MASAC;IATA;EAWA,CAzBA;;EA0BAC;IACAC;MACA;IACA;EAHA,CA1BA;EA+BAC;IACAC;MACA;IACA,CAHA;;IAIAC;MACA;QACAC;MACA,CAFA,MAEA;QACA;UACAC,cADA;UAEAC,sBAFA;UAGAjB;YACAkB,sBADA;YAEAC,eAFA;YAGAC;UAHA;QAHA;QASAL;MACA;IACA,CAnBA;;IAoBAM;MACA;QACAC,aADA;QAEAC;UACAnB;QADA;MAFA;MAMAoB;IACA,CA5BA;;IA6BAC;MACA;QACAH,cADA;QAEAC;UACAnB;QADA;MAFA;MAMAoB;IACA,CArCA;;IAsCAE;MACA;QACAX;MACA,CAFA,MAEA;QACA;UACAC,cADA;UAEAC,gBAFA;UAGAjB;YACAoB,kBADA;YAEAF,sBAFA;YAGAC,eAHA;YAIAV;UAJA;QAHA,GASAkB,IATA,CASAC;UACA;YACAb;UACA,CAFA,MAEA;YACAA;UACA,CAFA,MAEA;YACAA;UACA;QACA,CAjBA;MAkBA;IACA,CA7DA;;IA8DAc;MACA;QAAAP;QAAAC;UAAAO;QAAA;MAAA;IACA;;EAhEA;AA/BA","names":["name","created","axios","data","username","price","des","id","pic","number","availCount","soldCount","place","computed","welcome","methods","img","add","alert","method","url","buyerId","goodId","count","click_cart","path","query","window","click_order","buy","then","res","back","userId"],"sourceRoot":"src/views","sources":["Detail.vue"],"sourcesContent":["<template>\n    <div>  \n        <div class=\"center\">\n            <span @click=\"back\">\n            <div style=\"display: inline-block;\">\n                <img src=\"../assets/logo.png\" width=\"80\">\n            </div>\n            <div class=\"logo\" style=\"text-align:center;display: inline-block;\">\n                <div>烧瓶</div>\n                <div style=\"font-size: 16px;\">心仪生活上烧瓶</div>\n            </div>\n            </span>\n            <div style=\"display: inline-block;\">\n                <div class=\"search-box\" style=\"margin-right: 40px;\">\n                    <input type=\"text\" v-model=\"content\" style=\"border:0px;outline:0px;font-size:16px;height: 30px;\" size=\"50\" :placeholder=\"welcome\">\n                    <el-button type=\"primary\" @click=\"search\" style=\"height: 37px;font-size:15px\">开始烧瓶</el-button>\n                </div>\n                <div class=\"type-box\">\n                    <span style=\"margin-right: 10px\" @click.prevent=\"classification(1)\"><a href=# :class=\"{'activeCss':active==1}\">食品饮料</a></span>\n                    <span style=\"margin-right: 10px\" @click.prevent=\"classification(2)\"><a href=# :class=\"{'activeCss':active==2}\">日常用品</a></span>\n                    <span style=\"margin-right: 10px\" @click.prevent=\"classification(3)\"><a href=# :class=\"{'activeCss':active==3}\">文学</a></span>\n                    <span style=\"margin-right: 10px\" @click.prevent=\"classification(4)\"><a href=# :class=\"{'activeCss':active==4}\">医药</a></span>\n                </div>\n            </div>\n            <div style=\"display: inline-block;\">\n                <span @click=\"click_order\" style=\"margin-right:20px\"><el-button type=\"primary\" style=\"height: 37px;font-size:16px\">我的订单</el-button></span>\n                <span @click=\"click_cart\" style=\"margin-right:20px\"><el-button type=\"primary\" style=\"height: 37px;font-size:16px\">我的购物车</el-button></span>\n                <span><el-button type=\"primary\" style=\"height: 37px;font-size:16px\">联系客服</el-button></span>\n            </div>\n        </div>\n\n    <div id=\"main\">\n         <div id=\"detail\" style=\"display: flex;\">\n            <div class=\"goodsPic\">\n                <img :src=\"img()\">\n            </div>\n\n            <div id=\"information\">\n                <div class=\"title\">\n                    {{des}}\n                </div>\n\n                <div class=\"price\">\n                    <div id=\"act1\">\n                        烧瓶狂欢季\n                    </div>\n                    <div id=\"act2\">\n                        热卖中 下单即抢\n                    </div>\n                    <div id=\"num\">\n                        ￥{{price}}\n                    </div>\n\n                    <!-- <div>\n                        卖出：{{soldCount}}\n                    </div>\n                    <div>\n                        库存：{{availCount}}\n                    </div> -->\n                    \n                    <div id=\"numberBox\">\n                        <el-input-number v-model=\"number\" :step=\"1\"></el-input-number>\n                        <el-divider></el-divider>\n                    </div>\n                    <div>\n                        <div style=\"text-align:center;\">\n                            售出量：{{soldCount}}\n                        </div>\n                        <div style=\"text-align:center;\">\n                            库存量：{{availCount}}\n                        </div>\n                        \n                    </div>\n                    <div id=\"car\">\n                        <el-button  type=\"primary\" id=\"car_but\" @click=\"add\">加入购物车</el-button>\n                    </div>\n                    <div id=\"car\">\n                        <el-button  type=\"primary\" id=\"car_but\" @click=\"buy\">立即购买</el-button>\n                        <div id=\"place\">\n                            配送至...<el-input v-model=\"place\" placeholder=\"北航\" style=\"width:100px\"></el-input>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n         </div>\n    </div>\n</div>\n</template>\n\n<script>\n    import axios from 'axios';\n    export default {\n        name: \"Detail\",\n        created() {\n            this.price=this.$route.query.price;\n            this.des=this.$route.query.des;\n            this.id=this.$route.query.id;\n            this.username=this.$route.query.username;\n            this.availCount=this.$route.query.availCount;\n            this.soldCount=this.$route.query.soldCount;\n            axios.get('/api/goodimage/' + this.id + '/').then((res) => {\n                this.pic = res.data[0].pic;\n            })\n        },\n        data() {\n            return {\n                username: '',\n                price: '',\n                des: '',\n                id: '',\n                pic: '',\n                number: 1,\n                availCount: 0,\n                soldCount: 0,\n                place: '北航'\n            }\n        },\n        computed: {\n            welcome: function() {\n                return 'Hi, ' + this.username + '~ 开始您的烧瓶之旅';\n            }\n        },\n        methods: {\n            img() {\n                return this.pic;\n            },\n            add() {\n                if (this.number <= 0) {\n                    alert('请至少添加一件商品~');\n                } else {\n                    this.$axios({\n                        method: 'post',\n                        url: '/api/addtocart/',\n                        data: JSON.stringify({\n                                buyerId: this.username,\n                                goodId: this.id,\n                                count: this.number\n                        })\n                    })\n                    alert('添加成功！');\n                }               \n            },\n            click_cart() {\n                let routerDate = this.$router.resolve({\n                    path: '/cart',\n                    query: {\n                        id:this.username\n                    }\n                });\n                window.open(routerDate.href,'_blank');\n            },\n            click_order() {\n                let routerDate = this.$router.resolve({\n                    path: '/order',\n                    query: {\n                        id:this.username\n                    }\n                });\n                window.open(routerDate.href,'_blank');\n            },\n            buy() {\n                if (this.number <= 0) {\n                    alert('请至少添加一件商品~');\n                } else {\n                    this.$axios({\n                        method: 'post',\n                        url: '/api/buy/',\n                        data: JSON.stringify({\n                                count: this.number,\n                                buyerId: this.username,\n                                goodId: this.id,\n                                place: this.place\n                        })\n                    }).then(res => {\n                        if (res.data == -2) {\n                            alert('商品余量不足！');\n                        }else if (res.data == -1) {\n                            alert('余额不足！');\n                        }else {\n                            alert('购买成功！欢迎下次光临')\n                        }\n                    })\n                }  \n            },\n            back() {\n                this.$router.push({path:'/main',query: {userId: this.id} });     \n            }\n        }\n    }\n\n</script>\n\n<style scoped>\n        .logo {\n            display: inline-block;\n            color: rgb(174, 0, 255);\n            font-size: 30px;\n            font-weight: 600;\n            margin-right: 40px;\n        }\n        a {\n            text-align: center;\n            color: black;\n            text-decoration: none;\n            font-size: 17px;\n        }\n        a:hover {\n            color: red;\n        }\n        .center {\n            margin-top: 10px;\n            text-align: center;\n            margin-bottom: 10px;\n        }\n        button:hover {\n            background-color: cornflowerblue;\n        }\n        button {\n            background-color:rgb(174, 0, 255);\n            color: white;\n        }\n        .search-box{\n            display: inline-block;\n            border-width: 2px;\n            border-style: solid;\n            border-color: rgb(174, 0, 255);\n            padding-left: 0px;\n            padding-top: 0px;\n            padding-bottom: 0px;\n        }\n        #main {\n            width: 80%;\n            background-color: rgb(241, 241, 241);\n            position: absolute;\n            /* padding-left: 15%;\n            padding-right: 15%; */\n            text-align: left;\n        }\n        #detail {\n            /* height: 100%;\n            width: 70%; */\n            background-color: white;\n            margin: auto;\n            /* border-radius: 5%; */\n            /* padding-top: 1%;\n            padding-left: 1%; */\n            position: relative;\n        }\n        #information {\n            display: inline-block;\n            position: absolute;\n            top: 50px;\n            left: 40%;\n        }\n        .goodsPic {\n            margin-left: 100px;\n            margin-top: 50px;\n            display: flex;\n            width: 450px;\n            height: 450px;\n            /* border-width: 2px;\n            border-style: solid;\n            border-color: gray; */\n            box-shadow: #E4E7ED 0 0 5px;\n        }\n        .title {\n            margin-left: 200px;\n            padding-bottom: 50px;\n            width: 500px;\n            height: auto;\n            text-align: center;\n            font-size: 25px;\n            font-weight: 700;\n        }\n        .price {\n            background-color: rgb(255, 42, 42);\n            margin-left: 230px;\n            width: 426px;\n            height: 98px;\n            /* margin-top: 60px;\n            margin-left: 40px; */\n            padding-left: 1%;\n            padding-right: 1%;\n        }\n        #act1 {\n            display: inline-block;\n            color: white;\n            font-size: 25px;\n            font-family: STSong;\n            font-weight: 800;\n        }\n        #act2 {\n            display: inline-block;\n            text-align: right;\n            color: white;\n            font-size: 20px;\n            width: 270px;\n        }\n        #num {\n            background-color: white;\n            color: orangered;\n            font-size: 30px;\n            height: 50%;\n            margin-top: 5px;\n        }\n        #numberBox {\n            text-align: center;\n            margin-top: 20%;\n        }\n        #car {\n            text-align: center;\n            margin-top: 5%;\n        }\n        #car_but {\n            font-size: 25px;\n            background-color: red;  \n        }\n        #car_but:hover {\n            background-color: cornflowerblue;\n        }\n        .type-box {\n            padding-left: 60px;\n            padding-right: 80px;\n            padding-top: 13px;\n            width: 340px;\n            display: flex;\n            justify-content: space-between;\n            flex: auto;\n        }\n        #place {\n            margin-top:20px;\n        }\n</style>"]},"metadata":{},"sourceType":"module"}